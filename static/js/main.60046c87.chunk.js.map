{"version":3,"sources":["components/Footer/Footer.js","components/Header/Header.js","components/common/Context.js","components/TodoItem/TodoItem.js","components/TodoList/TodoList.js","api/api.js","App.js","index.js"],"names":["Footer","todos","clearCompleted","length","className","filter","todo","isCompleted","exact","to","activeClassName","type","onClick","Header","addTodo","useForm","register","setValue","handleSubmit","onSubmit","data","newTodo","name","ref","required","placeholder","Context","createContext","TodoItem","id","title","useState","isEditing","setIsEditing","useContext","setTodoCompleted","removeTodo","editTitle","getValues","currentClass","changedTitle","document","addEventListener","setInput","event","target","dataset","area","removeEventListener","onChange","checked","input","focus","defaultValue","data-area","onKeyUp","key","onDoubleClick","TodoListWithRouter","withRouter","props","location","todosToShow","pathname","map","instance","axios","baseURL","todoApi","get","response","Object","entries","post","then","delete","value","put","JSON","stringify","App","setTodos","allCompleted","every","useEffect","prev","forEach","htmlFor","Provider","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.60046c87.chunk.js","sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport { NavLink } from 'react-router-dom';\n\nexport const Footer = ({ todos, clearCompleted }) => {\n  if (!todos.length) {\n    return <></>;\n  }\n\n  return (\n    <footer className=\"footer\">\n      <span className=\"todo-count\">\n        {todos.filter(todo => !todo.isCompleted).length}\n        &nbsp;items left\n      </span>\n\n      <ul className=\"filters\">\n        <li>\n          <NavLink exact to=\"/\" activeClassName=\"selected\">All</NavLink>\n        </li>\n\n        <li>\n          <NavLink to=\"/active\" activeClassName=\"selected\">Active</NavLink>\n        </li>\n\n        <li>\n          <NavLink to=\"/completed\" activeClassName=\"selected\">\n            Completed\n          </NavLink>\n        </li>\n      </ul>\n\n      <button\n        type=\"button\"\n        className=\"clear-completed\"\n        onClick={clearCompleted}\n      >\n        Clear completed\n      </button>\n    </footer>\n  );\n};\n\nFooter.propTypes = {\n  todos: PropTypes.arrayOf(PropTypes.object).isRequired,\n  clearCompleted: PropTypes.func.isRequired,\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { useForm } from 'react-hook-form';\n\nexport const Header = ({ addTodo }) => {\n  const { register, setValue, handleSubmit } = useForm();\n\n  const onSubmit = (data) => {\n    addTodo(data.newTodo);\n    setValue('newTodo', '');\n  };\n\n  return (\n    <header className=\"header\">\n      <h1>todos</h1>\n\n      <form onSubmit={handleSubmit(onSubmit)}>\n        <input\n          name=\"newTodo\"\n          ref={register({ required: true })}\n          className=\"new-todo\"\n          placeholder=\"What needs to be done?\"\n        />\n      </form>\n    </header>\n  );\n};\n\nHeader.propTypes = {\n  addTodo: PropTypes.func.isRequired,\n};\n","import { createContext } from 'react';\n\nexport const Context = createContext();\n","import React, { useContext, useState } from 'react';\nimport PropTypes from 'prop-types';\nimport { useForm } from 'react-hook-form';\nimport { Context } from '../common/Context';\n\nexport const TodoItem = ({ isCompleted, id, title }) => {\n  const [isEditing, setIsEditing] = useState(false);\n  const { setTodoCompleted, removeTodo, editTitle } = useContext(Context);\n  const { register, getValues, handleSubmit } = useForm();\n\n  const handleChange = (event) => {\n    setTodoCompleted(id, event.target.checked);\n  };\n\n  const destroy = () => {\n    removeTodo(id);\n  };\n\n  let currentClass = isCompleted ? 'completed' : '';\n\n  if (isEditing) {\n    currentClass = 'editing';\n  }\n\n  const onSubmit = (data) => {\n    if (data.changedTitle) {\n      editTitle(id, data.changedTitle);\n    }\n\n    setIsEditing(false);\n  };\n\n  document.addEventListener('click', function setInput(event) {\n    if (event.target.dataset.area !== 'editTitle' && isEditing) {\n      onSubmit(getValues());\n      setIsEditing(false);\n    }\n\n    document.removeEventListener('click', setInput);\n  });\n\n  const onKeyUp = (event) => {\n    if (event.key === 'Escape') {\n      setIsEditing(false);\n    }\n  };\n\n  return (\n    <li className={currentClass}>\n      <div>\n        <input\n          type=\"checkbox\"\n          className=\"toggle\"\n          id={id}\n          onChange={handleChange}\n          checked={isCompleted}\n        />\n        {\n          isEditing\n            ? (\n              <form onSubmit={handleSubmit(onSubmit)}>\n                <input\n                  name=\"changedTitle\"\n                  ref={(input) => {\n                    input && input.focus();\n                    register()(input);\n                  }}\n                  defaultValue={title}\n                  type=\"text\"\n                  className=\"edit\"\n                  data-area=\"editTitle\"\n                  onKeyUp={onKeyUp}\n                />\n              </form>\n            )\n            : (\n              <>\n                <span\n                  className=\"title\"\n                  onDoubleClick={() => setIsEditing(true)}\n                >\n                  {title}\n                </span>\n                <button\n                  type=\"button\"\n                  className=\"destroy\"\n                  onClick={destroy}\n                />\n              </>\n            )\n        }\n      </div>\n    </li>\n  );\n};\n\nTodoItem.propTypes = {\n  isCompleted: PropTypes.bool.isRequired,\n  id: PropTypes.string.isRequired,\n  title: PropTypes.string.isRequired,\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { withRouter } from 'react-router-dom';\nimport { TodoItem } from '../TodoItem';\n\nconst TodoList = (props) => {\n  const { todos, location } = props;\n\n  let todosToShow = todos;\n\n  if (location.pathname === '/completed') {\n    todosToShow = todos.filter(todo => todo.isCompleted);\n  }\n\n  if (location.pathname === '/active') {\n    todosToShow = todos.filter(todo => !todo.isCompleted);\n  }\n\n  return (\n    <ul className=\"todo-list\">\n      {\n        todosToShow.map(todo => (\n          <TodoItem\n            key={todo.id}\n            id={todo.id}\n            isCompleted={todo.isCompleted}\n            title={todo.title}\n          />\n        ))\n      }\n    </ul>\n  );\n};\n\nTodoList.propTypes = {\n  todos: PropTypes.arrayOf(PropTypes.object).isRequired,\n  location: PropTypes.shape({\n    pathname: PropTypes.string.isRequired,\n  }).isRequired,\n};\n\nexport const TodoListWithRouter = withRouter(TodoList);\n","import * as axios from 'axios';\n\nconst instance = axios.create({\n  baseURL: 'https://todo-96cb8.firebaseio.com/',\n});\n\nexport const todoApi = {\n  async request() {\n    const response = await instance.get('/todos.json');\n\n    if (!response.data) {\n      return [];\n    }\n\n    const todos = Object.entries(response.data)\n      .map(todo => ({\n        ...todo[1],\n        id: todo[0],\n      }));\n\n    return todos;\n  },\n  send(todo) {\n    return instance\n      .post('/todos.json', todo)\n      .then(response => response.data.name);\n  },\n  removeItem(id) {\n    return instance.delete(`todos/${id}.json`);\n  },\n  editItem(id, name, value) {\n    return instance.put(`todos/${id}/${name}.json`, JSON.stringify(value));\n  },\n};\n","import React, { useState, useEffect } from 'react';\nimport { HashRouter } from 'react-router-dom';\nimport { Footer } from './components/Footer';\nimport { Header } from './components/Header';\nimport { TodoListWithRouter } from './components/TodoList';\nimport { todoApi } from './api/api';\nimport { Context } from './components/common/Context';\n\nfunction App() {\n  const [todos, setTodos] = useState([]);\n  const allCompleted = todos.every(todo => todo.isCompleted);\n\n  useEffect(() => {\n    todoApi.request().then(setTodos);\n  }, []);\n\n  const addTodo = (title) => {\n    const todo = {\n      title,\n      isCompleted: false,\n    };\n\n    todoApi.send(todo).then(id => setTodos(prev => [\n      ...prev,\n      {\n        ...todo,\n        id,\n      },\n    ]));\n  };\n\n  const setTodoCompleted = (id, isCompleted) => {\n    setTodos(prev => prev.map((todo) => {\n      if (todo.id === id) {\n        return {\n          ...todo,\n          isCompleted,\n        };\n      }\n\n      return todo;\n    }));\n\n    todoApi.editItem(id, 'isCompleted', isCompleted);\n  };\n\n  const removeTodo = (id) => {\n    setTodos(prev => prev.filter(todo => todo.id !== id));\n\n    todoApi.removeItem(id);\n  };\n\n  const clearCompleted = () => {\n    todos.forEach((todo) => {\n      if (todo.isCompleted) {\n        removeTodo(todo.id);\n      }\n    });\n  };\n\n  const editTitle = (id, title) => {\n    setTodos(prev => prev.map((todo) => {\n      if (todo.id === id) {\n        return {\n          ...todo,\n          title,\n        };\n      }\n\n      return todo;\n    }));\n\n    todoApi.editItem(id, 'title', title);\n  };\n\n  const selectAll = (event) => {\n    const { checked } = event.target;\n\n    todos.forEach((todo) => {\n      setTodoCompleted(todo.id, checked);\n    });\n  };\n\n  return (\n    <section className=\"todoapp\">\n      <Header addTodo={addTodo} />\n\n      <HashRouter>\n        <section className=\"main\">\n          <input\n            type=\"checkbox\"\n            id=\"toggle-all\"\n            className=\"toggle-all\"\n            onChange={selectAll}\n            checked={allCompleted}\n          />\n          <label htmlFor=\"toggle-all\">Mark all as complete</label>\n\n          <Context.Provider value={{\n            setTodoCompleted,\n            removeTodo,\n            editTitle,\n          }}\n          >\n            <TodoListWithRouter todos={todos} />\n          </Context.Provider>\n        </section>\n\n        <Footer todos={todos} clearCompleted={clearCompleted} />\n      </HashRouter>\n    </section>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './base.css';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}